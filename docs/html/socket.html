<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>测试websocket</title>
</head>

<script src="ouyunc-im-client-web-sdk.js"></script>
<script src="../protobuf/ouyunc-message.js"></script>


<script>


  
    const socket = new Socket("ws://10.30.1.49:8001");

	socket.onopen = function(e) {
		// 登录
        socket.send({
            messageType: 2,
            message: {
                from: '123456',
                to: '654321',
                contentType: 5,
                // content 是string 类型
                content: JSON.stringify({
                    identity:'123456',
                    appKey: 'appkey',
                    signatureAlgorithm: 1,//md5
                    signature: 'signature',
                    createTime: new Date().getTime()
                })
            },
            ip:'127.0.0.1',
            deviceType: 0,
            networkType: 0,
            encryptType: 0,
            serializeAlgorithm: 6
        });
	}
	socket.onmessage = function(e) {
		console.log('onmessage')
		console.log(e)
	}
	
	socket.onclose = function(e) {
		console.log('onclose')
	}
	
	socket.onerror = function(e) {
		console.log('onerror')
	}
	
	








</script>
<body>

    <form onsubmit="return false">

        <textarea  id="responseMessage" style="height: 300px; width: 100px"></textarea>
        <input type="button" onclick="document.getElementById('responseMessage').value = ''" value="清空内容"/>
        <textarea id="sendMessage" name="sendMessage" style="height: 300px; width: 100px"></textarea>
        <input type="button" onclick="send(this.form.sendMessage.value)" value="发送消息" />


        <input type="text" name="add" />
        <input type="button" onclick="addFriend(this.form.add.value)" value="添加好友" />

    </form>


</body>
</html>